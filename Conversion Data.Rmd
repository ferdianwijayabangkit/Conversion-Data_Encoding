---
title: "📊 Modul Pembelajaran: Metode Konversi Data dalam Data Science"
subtitle: "Implementasi Tiga Metode Utama: Binning, Label Encoding, dan One-Hot Encoding"
author: 
  - name: "Ferdian Bangkit Wijaya"
    affiliation: "Universitas Sultan Ageng Tirtayasa"
    email: "ferdian.bangkit@untirta.ac.id"
date: "`r format(Sys.Date(), '%B %d, %Y')`"
output:
  github_document:
    toc: true
    toc_depth: 3
always_allow_html: true
---

# 📊 Modul Pembelajaran: Metode Konversi Data dalam Data Science

## 🎯 **Tujuan Pembelajaran**
Memahami dan mengimplementasikan tiga metode utama konversi data yang sering digunakan dalam preprocessing data untuk machine learning dan data analysis.

## 📚 **Materi Konversi Data**

### 🗂️ **1. Binning/Diskretisasi**
**Definisi**: Proses mengubah data kontinyu menjadi data kategorial dengan membagi nilai ke dalam interval-interval tertentu.

**Kapan Digunakan:**
- Data kontinyu yang memiliki rentang nilai yang luas
- Ingin mengurangi kompleksitas model
- Mengatasi outlier atau noise dalam data
- Membuat data lebih interpretable

**Contoh**: Usia (17-90 tahun) → Kelompok usia (Muda, Dewasa, Senior)

### 🏷️ **2. Label Encoding** 
**Definisi**: Mengubah data kategori ordinal menjadi nilai numerik berurutan yang mempertahankan hierarki/urutan.

**Kapan Digunakan:**
- Data kategori yang memiliki urutan logis (ordinal)
- Model machine learning membutuhkan input numerik
- Ingin mempertahankan informasi urutan

**Contoh**: Pendidikan (SD → SMP → SMA → S1 → S2 → S3) menjadi (0, 1, 2, 3, 4, 5)

### 🔥 **3. One-Hot Encoding**
**Definisi**: Mengubah data kategori nominal menjadi beberapa kolom binary (0 dan 1), dimana setiap kategori direpresentasikan oleh satu kolom.

**Kapan Digunakan:**
- Data kategori tanpa urutan logis (nominal)
- Mencegah model mengasumsikan urutan yang tidak ada
- Algoritma yang sensitif terhadap magnitude nilai

**Contoh**: Jenis Kelamin (Male, Female) → sex_Male (0/1), sex_Female (0/1)

## ⚖️ **Perbandingan Metode**

| Metode | Jenis Data | Input | Output | Kegunaan Utama |
|--------|------------|--------|--------|----------------|
| **Binning** | Kontinyu | Numerik | Kategorial | Simplifikasi, reduce noise |
| **Label Encoding** | Ordinal | Kategori berurutan | Numerik berurutan | Pertahankan hierarki |
| **One-Hot Encoding** | Nominal | Kategori setara | Multiple binary columns | Hindari asumsi urutan |

## 🎓 **Kasus Studi**
Dalam notebook ini, kita akan menggunakan **Adult Census Income Dataset** untuk mempraktikkan ketiga metode konversi data:
- **Age** (kontinyu) → Binning menjadi kelompok usia
- **Education** (ordinal) → Label encoding berdasarkan tingkat pendidikan  
- **Sex** (nominal) → One-hot encoding untuk jenis kelamin

---

## 🔧 1. Install dan Load Libraries

```{r setup}
knitr::opts_chunk$set(
  echo = TRUE,
  warning = FALSE,
  message = FALSE,
  fig.width = 12,
  fig.height = 8
)
```

```{r libraries}
# Install libraries jika belum ada
install_if_missing <- function(package_name) {
  if (!require(package_name, character.only = TRUE)) {
    install.packages(package_name, dependencies = TRUE)
    library(package_name, character.only = TRUE)
    cat("✅", package_name, "berhasil diinstall dan dimuat\n")
  } else {
    cat("✅", package_name, "sudah terinstall\n")
  }
}

# Install required packages
packages <- c('dplyr', 'readr', 'fastDummies', 'knitr', 'kableExtra')
for (package in packages) {
  install_if_missing(package)
}

# Load additional libraries
library(dplyr)
library(readr)
library(fastDummies)
library(knitr)
library(kableExtra)

cat("\n🎉 Semua libraries berhasil diimport!\n")
```

## 📊 2. Load Dataset dan Eksplorasi Data

Kita akan menggunakan **Adult Census Income Dataset** yang memiliki berbagai jenis data:
- **Data Kontinyu**: age, hours-per-week
- **Data Ordinal**: education (tingkatan pendidikan)
- **Data Nominal**: sex, race, marital-status

```{r load_data}
# Load Adult Census Income Dataset
# Karena tidak ada akses langsung ke OpenML di R base, kita buat dataset sintetis
cat("📁 Membuat dataset sintetis Adult Census Income...\n")

set.seed(42)
n_samples <- 1000

df <- data.frame(
  age = sample(17:80, n_samples, replace = TRUE),
  sex = sample(c('Male', 'Female'), n_samples, replace = TRUE),
  education = sample(c('Preschool', '1st-4th', '5th-6th', '7th-8th', '9th', 
                      '10th', '11th', '12th', 'HS-grad', 'Some-college', 
                      'Assoc-voc', 'Assoc-acdm', 'Bachelors', 'Masters', 
                      'Prof-school', 'Doctorate'), n_samples, replace = TRUE),
  hours_per_week = sample(1:80, n_samples, replace = TRUE),
  race = sample(c('White', 'Black', 'Asian-Pac-Islander'), n_samples, replace = TRUE),
  marital_status = sample(c('Married-civ-spouse', 'Never-married', 'Divorced'), 
                         n_samples, replace = TRUE),
  stringsAsFactors = FALSE
)

cat(sprintf("\n📏 Dataset shape: %d rows, %d columns\n", nrow(df), ncol(df)))
cat("📋 Kolom tersedia:", paste(names(df), collapse = ", "), "\n")

# Tampilkan sample data
cat("\n📄 Sample Data (5 baris pertama):\n")
kable(head(df, 5), format = "html") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed"))

# Info dataset
cat("\n📊 Info Dataset:\n")
str(df)
```

## 🎯 3. Pemilihan Kolom untuk Konversi

Berdasarkan jenis data, kita akan memilih 3 kolom:
1. **Data Kontinyu**: `age` - untuk Binning/Diskretisasi
2. **Data Ordinal**: `education` - untuk Label Encoding
3. **Data Nominal**: `sex` - untuk One-Hot Encoding

Mari kita pastikan tidak ada missing data pada kolom-kolom ini.

```{r select_columns}
# Pilih kolom untuk konversi
selected_columns <- list(
  kontinyu = 'age',      # Untuk Binning
  ordinal = 'education', # Untuk Label Encoding  
  nominal = 'sex'        # Untuk One-Hot Encoding
)

cat("🔍 Analisis Kolom Terpilih:\n")
cat("========================================\n")

for (jenis in names(selected_columns)) {
  kolom <- selected_columns[[jenis]]
  cat(sprintf("\n%s - %s:\n", toupper(jenis), kolom))
  cat(sprintf("  Missing values: %d\n", sum(is.na(df[[kolom]]))))
  cat(sprintf("  Unique values: %d\n", length(unique(df[[kolom]]))))
  cat(sprintf("  Sample values: %s\n", paste(head(unique(df[[kolom]]), 5), collapse = ", ")))
}

# Buat dataframe kerja dengan kolom terpilih
df_work <- df[, unlist(selected_columns)]

# Pastikan tidak ada missing data
cat(sprintf("\n✅ Dataset kerja shape: %d rows, %d columns\n", nrow(df_work), ncol(df_work)))
cat("📊 Missing data check:\n")
print(sapply(df_work, function(x) sum(is.na(x))))

if (sum(is.na(df_work)) > 0) {
  cat("⚠️ Ada missing data, akan dihapus...\n")
  df_work <- na.omit(df_work)
  cat(sprintf("📏 Shape setelah hapus missing: %d rows, %d columns\n", nrow(df_work), ncol(df_work)))
}

cat("\n📋 Dataset Kerja:\n")
kable(head(df_work), format = "html") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
```

## 🗂️ 4. Implementasi Binning/Diskretisasi

**Binning** adalah proses mengubah data kontinyu menjadi data kategorial dengan membagi nilai ke dalam interval tertentu.

**Kegunaan:**
- Mengurangi noise dalam data
- Membuat data lebih interpretable
- Mengatasi outlier

Kita akan menerapkan binning pada kolom `age` untuk membuat kelompok usia.

```{r binning}
# Implementasi Binning pada kolom 'age'
cat("🗂️ BINNING/DISKRETISASI - Kolom 'age'\n")
cat("========================================\n")

# Tampilkan statistik age sebelum binning
cat("📊 Statistik Age:\n")
cat(sprintf("  Min: %d\n", min(df_work$age)))
cat(sprintf("  Max: %d\n", max(df_work$age)))
cat(sprintf("  Mean: %.1f\n", mean(df_work$age)))

# Buat bins berdasarkan tahap kehidupan
age_bins <- c(0, 25, 35, 50, 65, 100)
age_labels <- c('Muda (17-25)', 'Dewasa Muda (26-35)', 'Dewasa (36-50)', 
                'Paruh Baya (51-65)', 'Senior (65+)')

# Implementasi binning
df_work$age_binned <- cut(df_work$age, 
                         breaks = age_bins, 
                         labels = age_labels, 
                         include.lowest = TRUE)

cat("\n✅ Binning selesai!\n")
cat("📋 Distribusi Age setelah Binning:\n")
print(table(df_work$age_binned))

# Tampilkan contoh transformasi
cat("\n📄 Contoh Transformasi:\n")
sample_data <- df_work[1:10, c('age', 'age_binned')]
kable(sample_data, format = "html") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
```

## 🏷️ 5. Implementasi Label Encoding

**Label Encoding** mengubah data kategori ordinal menjadi angka berurutan yang mempertahankan urutan/hierarki.

**Karakteristik Data Ordinal:**
- Ada urutan yang bermakna
- Contoh: tingkat pendidikan (SD < SMP < SMA < S1 < S2 < S3)

**Penting:** Harus mendefinisikan urutan yang benar, jangan gunakan encoding otomatis yang mengurutkan secara alfabetis!

```{r label_encoding}
# Implementasi Label Encoding pada kolom 'education'
cat("🏷️ LABEL ENCODING - Kolom 'education'\n")
cat("========================================\n")

# Tampilkan kategori education yang ada
cat("📋 Kategori Education yang ada:\n")
education_counts <- table(df_work$education)
print(education_counts)

# Definisikan urutan education yang benar (dari rendah ke tinggi)
education_order <- c('Preschool', '1st-4th', '5th-6th', '7th-8th', '9th', 
                    '10th', '11th', '12th', 'HS-grad', 'Some-college', 
                    'Assoc-voc', 'Assoc-acdm', 'Bachelors', 'Masters', 
                    'Prof-school', 'Doctorate')

# Filter hanya education yang ada di data
available_education <- education_order[education_order %in% unique(df_work$education)]

cat("\n📚 Urutan Education yang tersedia:\n")
for (i in seq_along(available_education)) {
  cat(sprintf("  %d: %s\n", i-1, available_education[i]))
}

# Manual mapping dengan urutan yang benar
education_mapping <- setNames(0:(length(available_education)-1), available_education)

# Implementasi Label Encoding
df_work$education_encoded <- education_mapping[df_work$education]

cat("\n✅ Label Encoding selesai!\n")
cat("📋 Mapping Education:\n")
for (edu in names(education_mapping)) {
  code <- education_mapping[edu]
  count <- sum(df_work$education == edu, na.rm = TRUE)
  cat(sprintf("  %d: %s (%d data)\n", code, edu, count))
}

# Tampilkan contoh transformasi
cat("\n📄 Contoh Transformasi:\n")
sample_data <- df_work[1:10, c('education', 'education_encoded')]
kable(sample_data, format = "html") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
```

## 🔥 6. Implementasi One-Hot Encoding

**One-Hot Encoding** mengubah data kategori nominal menjadi beberapa kolom binary (0 dan 1).

**Karakteristik Data Nominal:**
- Tidak ada urutan yang bermakna
- Setiap kategori setara
- Contoh: jenis kelamin, warna, negara

**Keuntungan:** Tidak ada asumsi urutan, setiap kategori diperlakukan adil  
**Kerugian:** Meningkatkan dimensi data (1 kolom → n kolom)

```{r onehot_encoding}
# Implementasi One-Hot Encoding pada kolom 'sex'
cat("🔥 ONE-HOT ENCODING - Kolom 'sex'\n")
cat("========================================\n")

# Tampilkan kategori sex yang ada
cat("📋 Kategori Sex yang ada:\n")
sex_counts <- table(df_work$sex)
print(sex_counts)

# Implementasi One-Hot Encoding menggunakan fastDummies
sex_onehot <- dummy_cols(df_work['sex'], select_columns = 'sex', remove_first_dummy = FALSE)
sex_onehot <- sex_onehot[, !names(sex_onehot) %in% 'sex']  # Hapus kolom asli

cat("\n✅ One-Hot Encoding selesai!\n")
cat("📊 Hasil transformasi:\n")
cat(sprintf("  Kolom asli: 1 kolom ('sex')\n"))
cat(sprintf("  Kolom baru: %d kolom\n", ncol(sex_onehot)))
cat(sprintf("  Kolom yang dibuat: %s\n", paste(names(sex_onehot), collapse = ", ")))

# Gabungkan dengan dataframe kerja
df_work <- cbind(df_work, sex_onehot)

cat("\n📄 Contoh Transformasi:\n")
sample_data <- df_work[1:10, c('sex', names(sex_onehot))]
kable(sample_data, format = "html") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed"))

# Verifikasi: setiap baris harus memiliki tepat satu nilai 1
cat("\n🔍 Verifikasi One-Hot Encoding:\n")
cat("Setiap baris harus sum = 1:\n")
row_sums <- rowSums(sex_onehot)
cat(sprintf("Min sum: %d, Max sum: %d\n", min(row_sums), max(row_sums)))
if (all(row_sums == 1)) {
  cat("✅ Verifikasi berhasil!\n")
} else {
  cat("❌ Ada masalah!\n")
}
```

## 📊 7. Evaluasi dan Gabungan Hasil

Mari kita evaluasi hasil konversi data dan buat dataframe final yang menunjukkan perbandingan sebelum dan sesudah konversi.

**Ringkasan Metode:**
- **Binning**: age (kontinyu) → age_binned (kategorial)
- **Label Encoding**: education (ordinal) → education_encoded (numerik)
- **One-Hot Encoding**: sex (nominal) → sex_Female, sex_Male (binary)

```{r evaluation}
# Evaluasi dan Gabungan Hasil Konversi Data
cat("EVALUASI HASIL KONVERSI DATA\n")
cat("==================================================\n")

# Buat dataframe final dengan kolom sebelum dan sesudah konversi berurutan
df_final <- data.frame(
  age_original = df_work$age,
  age_binned = as.character(df_work$age_binned),
  education_original = df_work$education,
  education_encoded = as.integer(df_work$education_encoded),
  sex_original = df_work$sex,
  stringsAsFactors = FALSE
)

# Tambahkan kolom one-hot encoding
onehot_cols <- names(sex_onehot)
for (col in onehot_cols) {
  df_final[[col]] <- as.integer(df_work[[col]])
}

cat("Dataset final berhasil dibuat!\n")
cat(sprintf("Shape dataset final: %d rows, %d columns\n", nrow(df_final), ncol(df_final)))
cat("Kolom:", paste(names(df_final), collapse = ", "), "\n")

# Verifikasi urutan education
cat("\nVERIFIKASI URUTAN EDUCATION:\n")
cat("----------------------------------------\n")
cat("Urutan yang didefinisikan:\n")
for (i in seq_along(available_education)) {
  edu <- available_education[i]
  count <- sum(df_final$education_original == edu, na.rm = TRUE)
  if (count > 0) {
    cat(sprintf("  %d: %s (%d data)\n", i-1, edu, count))
  }
}

education_unique <- unique(df_final$education_original)
cat(sprintf("\nEducation yang ada di data: %d kategori\n", length(education_unique)))
cat("Urutan berdasarkan tingkat pendidikan (rendah ke tinggi):\n")
cat("Urutan sudah benar dari Preschool sampai Doctorate\n")

# Tampilkan ringkasan konversi
cat("\nRINGKASAN KONVERSI:\n")
cat("------------------------------\n")
cat("1. BINNING:\n")
cat(sprintf("   age_original (kontinyu) -> age_binned (kategorial)\n"))
cat(sprintf("   Range: %d-%d -> %d kategori\n", 
           min(df_final$age_original), max(df_final$age_original), 
           length(unique(df_final$age_binned))))

cat("\n2. LABEL ENCODING:\n")
cat(sprintf("   education_original (ordinal) -> education_encoded (numerik)\n"))
cat(sprintf("   Kategori: %d -> Range 0-%d\n", 
           length(unique(df_final$education_original)), 
           max(df_final$education_encoded, na.rm = TRUE)))

cat("\n3. ONE-HOT ENCODING:\n")
cat(sprintf("   sex_original (nominal) -> %d kolom binary\n", length(onehot_cols)))
cat(sprintf("   Kategori: %d -> %d kolom (0/1)\n", 
           length(unique(df_final$sex_original)), length(onehot_cols)))

# Tampilkan dataframe dalam format tabel yang rapi
cat("\nTABEL HASIL KONVERSI DATA (20 baris pertama)\n")
cat("================================================================================\n")
cat("PERBANDINGAN SEBELUM DAN SESUDAH KONVERSI:\n")
cat("--------------------------------------------------------------------------------\n")

# Tampilkan 20 baris dalam format tabel
display_df <- head(df_final, 20)
kable(display_df, format = "html") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed"),
                full_width = FALSE) %>%
  scroll_box(width = "100%", height = "400px")
```


---

**👤 Author**: Ferdian Bangkit Wijaya  
**🏛️ Afiliasi**: Universitas Sultan Ageng Tirtayasa  
**📧 Contact**: ferdian.bangkit@untirta.ac.id  
**📅 Last Updated**: September 2025